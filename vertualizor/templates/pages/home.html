{% extends '../base/base.html' %}
{% block content %}
<div>
      <div>
            <form method='POST' action='/create/'>
                  {% csrf_token %}
                  <textarea name='notsafe/url/' name='content'></textarea>
                  <button type='submit'>Save</button>
            
                </form>
                
      </div>
          <div class="container" id='posts'>
            loading ...
      </div>
</div>

<script>
const element = document.getElementById('posts')
const xhr = new XMLHttpRequest()
xhr.responseType = 'json'
xhr.open("GET","/posts/")

xhr.onload = function(){
      var posts = ''
      var like = 0
      var dislike = 0

console.log(like, dislike)
      var listItems = xhr.response.response
      listItems.map((item,index)=>{
            posts = posts+"<p class='card'>"+'<div card-body>'+ index+'. ' +item.content + ' <button onclick="hanldeLike" class="btn btn-success">'+like +'👍'+ '</button>' + '<button id="dislike" class="btn btn-danger" onclick="hanldeDisLike()">'+dislike+ '👎' +'</button>' +'</div>' +'</p>'
      })
      element.innerHTML = posts
      function hanldeLike(){
      like =like+1
}
function hanldeDisLike(){
      dislike = dislike+1
}

}

xhr.send()
</script>
{% endblock content %}